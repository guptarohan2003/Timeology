if (self.CavalryLogger) { CavalryLogger.start_js(["OJ7ee"]); }

__d("RTWebPreCallContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext;c=a(null);e.exports=c}),null);
__d("randomZenonCallID",["Random"],(function(a,b,c,d,e,f){"use strict";function a(){return String(b("Random").uint32()+1)}e.exports=a}),null);
__d("randomZenonNonce",["Random"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2,h=6,i=36,j=2176782336;function a(){var a="";for(var c=0;c<g;c++){var d=Math.floor(b("Random").random()*j).toString(i);while(d.length<h)d="0"+d;a+=d}return a}e.exports=a}),null);
__d("ZenonPreCallHookBuilderHelper",["ZenonCallWindowErrors","randomZenonCallID","randomZenonNonce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ZenonCallWindowErrors").CannotAcceptInviteError,h=b("ZenonCallWindowErrors").InviteNotFoundError,i=b("ZenonCallWindowErrors").UninitializedError;a={acceptCall:function(a,c){__p&&__p();if(a===null)throw new i();var d=a.callInviteModel;a=a.callWindowController;var e=d.getCurrentInvite();if(e===null)throw new h();if(e.type!=="ringing")throw new g();var f=b("randomZenonNonce")();a=a.initCall({context:{controllerParams:e.controllerParams,intent:"accept invite"},joinContext:{thread:e.thread,type:"thread"},mediaType:e.requestingVideo?"video":"audio",nonce:f});e=a[0];a=a[1];d.accept(f,{isPopupBlocked:e===null,trigger:c});return a},startCall:function(a,c){__p&&__p();var d=c.existingCall,e=c.extra,f=c.invitees,g=c.mediaType,h=c.thread;c=c.trigger;if(a===null)throw new i();var j=a.callWindowController;a=a.incomingRingSDK;var k=b("randomZenonCallID")(),l=b("randomZenonNonce")();j=j.initCall({context:{callID:k,existingCall:d,intent:"start or join",invitees:f},extra:e,joinContext:{thread:h,type:"thread"},mediaType:g,nonce:l});d=j[0];f=j[1];a.startCallIntent(l,{callID:k,callTrigger:c,isPopupBlocked:d===null,isVideo:g==="video",peerID:h.type===1?h.id:"MW_PEER_ID",protocol:h.type===1?"p2p":"mw"});return f}};e.exports=a}),null);
__d("useZenonCallInvite",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=b("React").useState;function a(a){__p&&__p();var b=h(function(){return a?a.getCurrentInvite():null}),c=b[0],d=b[1];g(function(){if(a){var b=a.addListener("callInvite",d);return function(){b.remove()}}else d(null)},[a]);return c}e.exports=a}),null);
__d("ZenonPreCallHookBuilder",["FBLogger","React","ZenonPreCallHookBuilderHelper","useZenonCallInvite"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(a=b("React")).useCallback,h=a.useContext,i=a.useDebugValue,j=a.useEffect,k=6e4;c={createAcceptCallCallbackHook:function(a){return function(){var c=h(a);return g(function(a){a=a.trigger;return b("ZenonPreCallHookBuilderHelper").acceptCall(c,a)},[c])}},createCallInviteHook:function(a){return function(){var c=h(a);c=b("useZenonCallInvite")(c?c.callInviteModel:null);i(c);return c}},createInviteAndStartCallCallbackHookFactory:function(a,c){__p&&__p();return function(d,e){__p&&__p();return function(){__p&&__p();var f=h(a),i=d(),j=e(),k=c();return g(function(a){__p&&__p();var c=a.existingCall,d=a.thread;if(!f||!f.incomingRingSDK.isCallSupported({threadType:d.type,type:"thread"}))j(a);else switch(d.type){case 1:k(babelHelpers["extends"]({},a,{invitees:[d.id]}));break;case 2:c===null||c.call_state==="NO_ONGOING_CALL"?i(a,function(b){k(babelHelpers["extends"]({},a,{invitees:b}))}):k(babelHelpers["extends"]({},a,{invitees:[]}));break;default:b("FBLogger")("rtc_www").blameToPreviousFrame().mustfix("Attempted to start RTC call for unsupported thread type %d",d.type)}},[f,i,j,k])}}},createNoAnswerTimeoutHook:function(a,b){return function(){var c=h(a),d=b();j(function(){if(c&&d&&d.type==="ringing"){var a=window.setTimeout(function(){c.callInviteModel.decline("NoAnswerTimeout")},k);return function(){window.clearTimeout(a)}}},[c,d])}},createStartCallCallbackHook:function(a){return function(){var c=h(a);return g(function(a){var d=a.existingCall,e=a.extra,f=a.invitees,g=a.mediaType,h=a.thread;a=a.trigger;return b("ZenonPreCallHookBuilderHelper").startCall(c,{existingCall:d,extra:e,invitees:f,mediaType:g,thread:h,trigger:a})},[c])}}};e.exports=c}),null);
__d("RTWebPreCallHooks",["RTWebPreCallContext","ZenonPreCallHookBuilder"],(function(a,b,c,d,e,f){"use strict";d=(a=b("ZenonPreCallHookBuilder")).createAcceptCallCallbackHook(c=b("RTWebPreCallContext"));f=a.createCallInviteHook(c);b=a.createNoAnswerTimeoutHook(c,f);var g=a.createStartCallCallbackHook(c);a=a.createInviteAndStartCallCallbackHookFactory(c,g);e.exports={createInviteAndStartCallCallbackHook:a,useAcceptCallCallback:d,useCallInvite:f,useNoAnswerTimeout:b,useStartCallCallback:g}}),null);
__d("RTCWebUserActionsDebugTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:RTCWebUserActionsDebugLoggerConfig")}),null);
__d("RTCWebUserActionsTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:RTCWebUserActionsLoggerConfig")}),null);
__d("ZenonUserActionLogger",["FBRTCConsoleLogger","RTCWebUserActionsDebugTypedLoggerLite","RTCWebUserActionsTypedLoggerLite","gkx","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map(),h=window.location.hostname.search("facebook")!==-1?"facebook":window.location.hostname.search("messenger")!==-1?"messenger_dot_com":null,i=h==="facebook"&&b("gkx")("708253")?"Comet":h==="messenger_dot_com"&&b("qex")._("1277463")?"ZenonOnMercury":void 0,j={logCheckpoint:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"checkpoint"}))},logClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logError:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"error"}))},logEvent:function(a){var c;c=babelHelpers["extends"]({},a,{codebase_version:i,page:(c=a.page)!=null?c:h});var d=babelHelpers["extends"]({},c,{client_time:Date.now()});b("RTCWebUserActionsDebugTypedLoggerLite").log(d);b("RTCWebUserActionsTypedLoggerLite").log(d);b("FBRTCConsoleLogger").getInstance().getLogHistory().log((d=a.event)!=null?d:"null",JSON.stringify(c))},logImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},logPreCallClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logPreCallImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},startTimer:function(a){var b=Date.now();g=g.set(a,b);j.logCheckpoint({checkpoint:a+"_timerStart"})},stopTimer:function(a){__p&&__p();var b=a.checkpointName===void 0?a.timerName:a.checkpointName,c=a.event||{},d=function(a){var b=g.get(a);if(b!=null){g["delete"](a);return parseInt(Date.now()-b,10)}return null};c.event_time_elapsed=d(a.timerName);j.logCheckpoint(babelHelpers["extends"]({},c,{checkpoint:b+"_timerEnd"}));return parseInt(c.event_time_elapsed,10)}};e.exports=j}),null);
__d("showDesktopNotification",["MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","ZenonUserActionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=8e3;function a(){__p&&__p();return function(a){__p&&__p();var c=a.acceptCall,d=a.body,e=a.icon;a=a.title;var f={body:d,closeTime:g,icon:e,onClick:function(){b("ZenonUserActionLogger").logClick({surface:"desktop_notification",component:"browser_notification"}),window.focus(),c({trigger:"desktop_notification"})},onShow:function(){b("ZenonUserActionLogger").logImpression({surface:"desktop_notification",component:"browser_notification"})},title:a};if(b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DEFAULT){b("MessengerDesktopNotifications").requestPermission(function(){b("MessengerDesktopNotifications").showNotification(f)});return}b("MessengerDesktopNotifications").showNotification(f)}}e.exports=a}),null);
__d("RTWebCallInviteDesktopNotification.react",["fbt","React","RTWebPreCallHooks","ZenonUsersHooks","showDesktopNotification","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){a=a.invite;return(a==null?void 0:a.type)==="ringing"?b("React").jsx(h,{invite:a}):null}function h(a){a=a.invite;var c=b("showDesktopNotification")(),d=b("usePrevious")(a.ringID),e=b("RTWebPreCallHooks").useAcceptCallCallback(),f=b("ZenonUsersHooks").useZenonUser(a.inviterID),g=a.requestingVideo,h=a.participants.length>1;if(d!==a.ringID&&f!=null){c({acceptCall:e,body:j(f.shortName),icon:(d=f.profilePictureUrl)!=null?d:null,title:i(g,h)})}return null}function i(a,b){if(!b)return a?g._("Incoming video chat"):g._("Incoming call");else return a?g._("Incoming Group Video Chat"):g._("Incoming Group Call")}function j(a){return g._("{caller name} is calling you. Click to answer.",[g._param("caller name",a)])}e.exports=a}),null);
__d("useRingTone",["React","RTCConfig","Sound"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=[b("RTCConfig").ringtone_mp3_url,b("RTCConfig").ringtone_ogg_url];function a(a){a===void 0&&(a=!1),g(function(){if(a){b("Sound").play(h,null,!0);return function(){b("Sound").stop(h)}}},[a])}e.exports=a}),null);
__d("ZenonCallInviteRingtone.react",["useRingTone"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.invite;b("useRingTone")((a==null?void 0:a.type)==="ringing");return null}e.exports=a}),null);
__d("useDocumentTitleBlink",["DocumentTitle","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect;function a(a){g(function(){if(a==null)return;var c=b("DocumentTitle").blink(a);return function(){c.stop()}},[a])}e.exports=a}),null);
__d("ZenonCallInviteTitleBlinking.react",["fbt","React","ZenonUsersHooks","useDocumentTitleBlink"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){a=a.invite;return a!==null&&a.type==="ringing"&&a.inviterID!=null?b("React").jsx(h,{inviterID:a.inviterID}):null}function h(a){a=a.inviterID;a=b("ZenonUsersHooks").useZenonUser(a);b("useDocumentTitleBlink")(a?g._("{name} is calling",[g._param("name",a.shortName)]):null);return null}e.exports=a}),null);
__d("useZenonDialogController",["React","usePrevious"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=b("React").useState;function a(a,c){var d=h(null),e=d[0],f=d[1],i=b("usePrevious")(a);g(function(){if((a==null?void 0:a.ringID)===(i==null?void 0:i.ringID)&&(a==null?void 0:a.type)===(i==null?void 0:i.type))return;e&&(e.dismiss(),f(null));if(a===null)return;f(c())},[e,a,i,c])}e.exports=a}),null);
__d("ZenonCallWindowOpener_Popup",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1280,h={LargeForGroup:{height:772,width:1100},LargeForP2P:{height:720,width:1280},Small:{height:540,width:960}},i=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no"];a=function(){__p&&__p();function a(){}var b=a.prototype;b.openWindow=function(a){a=this.$1(a.joinContext);var b=this.$2(a),c=b.left;b=b.top;return window.open("","",[].concat(i,["height="+a.height,"width="+a.width,"left="+c,"top="+b]).join(","))};b.$1=function(a){if(screen&&screen.width>g)if(a.type==="link"||a.thread.type===2)return h.LargeForGroup;else return h.LargeForP2P;else return h.Small};b.$2=function(a){var b=a.height;a=a.width;return{left:Math.floor(window.innerWidth/2-a/2+((a=window.screenLeft)!=null?a:window.screenX)),top:Math.floor(window.innerHeight/2-b/2+((a=window.screenTop)!=null?a:window.screenY))}};return a}();e.exports=a}),null);
__d("RTWebPreCallContextSingleton",["requireDeferred","FBLogger","JSResource","RTWebCallWindowControllerLoader","RTWebIncomingRingConfiguration","ZenonCallInviteModelLoader","ZenonIncomingRingSDK","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("requireDeferred")("RTWebSignalingListener"),h=!1,i;a={create:function(a){if(i!=null)return i;try{var c=new(b("ZenonIncomingRingSDK"))();i={callInviteModel:new(b("ZenonCallInviteModelLoader"))(c),callWindowController:new(b("RTWebCallWindowControllerLoader"))(a,b("JSResource")("RTWebMercuryCallWindowInitializer").__setRef("RTWebPreCallContextSingleton")),incomingRingSDK:c};return i}catch(a){b("FBLogger")("rtc_www").catching(a).mustfix("Pre-call context initialization failed! This breaks all calling!");return null}},init:function(){if(h)return i;h=!0;i.callInviteModel.init();i.callWindowController.init();i.incomingRingSDK.init({isSupportedClientForProtocol:b("RTWebIncomingRingConfiguration").isSupportedClientForProtocol});b("promiseDone")(g.load(),function(a){i.incomingRingSDK.initListeners([new a()])});return i},get:function(){return i}};e.exports=a}),null);